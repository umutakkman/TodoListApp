@model TodoListApp.WebApi.Models.ApiModels.TodoListWebApiModel

@{
	ViewData["Title"] = "Todo List Details";
}

<div class="container my-5">
	<div class="card shadow-sm border-0">
		<div class="card-header bg-white border-bottom">
			<h1 class="card-title mb-0">@Model.Title</h1>
		</div>
		<div class="card-body">
			<p>@Model.Description</p>
			<div class="mb-4">
				<a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning me-2">Edit Todo List</a>
				<a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger me-2">Delete Todo List</a>
				<a asp-action="Index" class="btn btn-secondary">Back to Todo Lists</a>
			</div>
			<hr />
			<h2>Task Items</h2>
			<div class="mb-3">
				<a asp-controller="TaskItem" asp-action="Create" asp-route-todoListId="@Model.Id" class="btn btn-primary">Add New Task</a>
			</div>
			@if (Model.TaskItems != null && Model.TaskItems.Any())
			{
				<div class="table-responsive">
					<table class="table table-hover">
						<caption>Details of todo list</caption>
						<thead>
							<tr>
								<th>Title</th>
								<th>Due Date</th>
								<th>Status</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var task in Model.TaskItems)
							{
								<tr class="@(task.DueDate < DateTime.Now ? "table-danger" : "")">
									<td>@task.Title</td>
									<td>@task.DueDate.ToString("yyyy-MM-dd")</td>
									<td>@task.Status</td>
									<td>
										<a asp-controller="TaskItem" asp-action="Details" asp-route-id="@task.Id" class="btn btn-info btn-sm">View</a>
									</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			}
			else
			{
				<p>No task items available for this Todo List.</p>
			}
		</div>
	</div>
</div>
